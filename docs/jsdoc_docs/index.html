<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h1>autoEdit V2</h1><p>Fast text based video editing deesktop app for Mac OSX. Built in node NWJS and backbone.
Making video production faster, easier and more accessible.</p>
<p><img src="/docs/img/gif/3_transcription.gif" alt="Transcription "></p>
<p>Uses <a href="https://github.com/pietrop/nwjs_boilerplate">NWJS boilerplate</a>  as a starting point.</p>
<p>Is designed so that the front end in backbone can be used as standalone static site. Which is how 
<a href="https://opennewslabs.github.io/autoEdit_2/public/demo/frontEnd/index.html#transcriptions">the demo</a> is run, with an hard coded backbone model.</p>
<h2>Overview of how the app works</h2><p>The app uses IBM watson or Gentle open source Speech To Text systems to generate transcription.
The user can then select text and export a video sequence to the video editing software of choice.</p>
<p><img src="/docs/img/tutorial/0_diagram.png" alt="Overview diagram "></p>
<h2>Ready to use release</h2><p>see <a href="https://github.com/OpenNewsLabs/autoEdit_2/releases">releases section</a> to downlaod latest packaged version ready to use. 
All you need to get started is IBM Watson API Blumix keys. <a href="https://opennewslabs.github.io/autoEdit_2/user_manual/setup.html">Check out the guide section on this</a></p>
<p>And the <a href="https://opennewslabs.github.io/autoEdit_2/user_manual/usage.html">user manual</a></p>
<h2>Launching the app</h2><p>For developers</p>
<pre class="prettyprint source lang-bash"><code>npm install</code></pre><p>and then </p>
<pre class="prettyprint source lang-bash"><code>npm start</code></pre><p>You'd also need to get IBM watson STT keys or have the Gentle Open source app running locally <a href="https://opennewslabs.github.io/autoEdit_2/user_manual/setup.html">see the guide for instructions on setting this up </a></p>
<hr>
<h2>repackaging the the app</h2><p>the deploy script is in <code>deploy.js</code> and you can run it with <code>node deploy.js</code> from terminal from root of app, creates a folder called <code>build</code> where you can find your packaged app.  or <code>npm run build</code></p>
<p><a href="lhttps://github.com/pietrop/nwjs_boilerplate#deploy">more info on deploy/packaging of app in nwjs boilerplate project</a></p>
<p>The <code>/cache</code> folder is used by deploy to keep the latest version needed to build and package the app, to avoid having to re-download it every time.</p>
<p><code>tmd_media</code>  is where the wav files are kept, and the deleted, when sending split chunks to watson.
<code>media</code> is where video webm previews and audio wav files for transcriptions are kept. </p>
<p><code>wttskeys.json</code> at root level is where watson API keys are ketp, this file is in gitignore to avoid accidentally pushing it to github. When you first clone the project, this file shoudl not be there. And you want to make sure is not there in the packaged app if you don't want to share your API keys.</p>
<hr>
<h2>Contributing</h2><p>Feel free to get in touch with any questions. Fork the project and send me a pull request.</p>
<h2>Contributors</h2><ul>
<li><a href="http://github.com/pietrop">Pietro Passarelli</a></li>
</ul></article>
    </section>









<section>

<header>
    
        <h2>frontEnd/autoEdit2API.js</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description">Manages the backend of the app by overwrighting backbone.sync function</div>
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    
    <dt class="tag-author">Author:</dt>
    <dd class="tag-author">
        <ul>
            <li>Pietro Passarelli</li>
        </ul>
    </dd>
    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="frontEnd_autoEdit2API.js.html">frontEnd/autoEdit2API.js</a>, <a href="frontEnd_autoEdit2API.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    
    <dt class="tag-todo">To Do:</dt>
    <dd class="tag-todo">
        <ul>
            <li>Write documentation.</li>
        
            <li>add error handling and error callbacks</li>
        </ul>
    </dd>
    
</dl>


        
    
    </div>

    

    
        <h3 class="subsection-title">Requires</h3>

        <ul>
            <li>module:fs</li>
        
            <li>module:path</li>
        
            <li>module:linvodb</li>
        
            <li>module:level-js</li>
        
            <li>module:interactive_transcription_generator/index.js</li>
        </ul>
    

    

     

    

    

    

    

    
</article>

</section>







<section>

<header>
    
        <h2>frontEnd/demo_jr.js</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description">provides backbone models for client side browser based demo. Loaded into memory in `index.html`</div>
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    
    <dt class="tag-author">Author:</dt>
    <dd class="tag-author">
        <ul>
            <li>Pietro Passarelli</li>
        </ul>
    </dd>
    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="frontEnd_demo_jr.js.html">frontEnd/demo_jr.js</a>, <a href="frontEnd_demo_jr.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    
</dl>


        
    
    </div>

    

    

    

     

    

    

    

    

    
</article>

</section>







<section>

<header>
    
        <h2>frontEnd/edl_composer/index.js</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description">ELD composer to create Edit Decision List.</div>
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    
    <dt class="tag-author">Author:</dt>
    <dd class="tag-author">
        <ul>
            <li>Pietro Passarelli</li>
        </ul>
    </dd>
    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="frontEnd_edl_composer_index.js.html">frontEnd/edl_composer/index.js</a>, <a href="frontEnd_edl_composer_index.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    
    <dt class="tag-todo">To Do:</dt>
    <dd class="tag-todo">
        <ul>
            <li>Write documentation.</li>
        
            <li>add error handling and error callbacks
EDL, Edit Decision List, is a plain text format that describes a video sequence. It can be opened in a video editing software to reconnect media to assemble a video sequence.
<a href="https://documentation.apple.com/en/finalcutpro/usermanual/index.html#chapter=96%2526section=1%2526tasks=true">Apple EDL spec</a>
>"In an EDL, each clip in your sequence is represented by a line of text called an event, which has a unique event number. A clip in an EDL is defined by a source reel name and two pairs of timecode In and Out points. The first pair of timecode numbers describes the source tape (or clip) In and Out points. The second pair describes the timecode location where that clip should be placed onto a master tape (or Timeline)."
The EDL class here represents the EDL as an Object. That can take in a json sequence to generate a string conforming to the specs described above.
Example usage, takes in a sequence. and `.compose()` is ued to generate the EDL.

```js
var edlSqDemo = {
    "title": "Demo Title of project",
    //offset is option default is "00:00:00:00"
    "offset": "00:00:28:08",
    "events":  [
      { "id":1,
        "startTime": 10,
        "endTime": 20,
        "reelName":"SomeReelName",
        "clipName":"Something.mov"
      },
      { "id":2,
        "startTime": 45,
        "endTime": 55,
        "reelName":"SomeOtherReelName",
        "clipName":"SomethingElse.mov"
      },
        { "id":2,
        "startTime": 45,
        "endTime": 55,
        "reelName":"NA",
        "clipName":"SomethingElse.mov"
      }
    ]
}

var edl = new EDL(edlSqDemo)
console.log(edl.compose())
```</li>
        </ul>
    </dd>
    
</dl>


        
    
    </div>

    

    

    

     

    

    

    

    

    
</article>

</section>







<section>

<header>
    
        <h2>frontEnd/js/sync.js</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description">Manages the backend of the app by overwrighting backbone.sync function to the `autoEditAPI.js` module.</div>
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    
    <dt class="tag-author">Author:</dt>
    <dd class="tag-author">
        <ul>
            <li>Pietro Passarelli</li>
        </ul>
    </dd>
    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="frontEnd_js_sync.js.html">frontEnd/js/sync.js</a>, <a href="frontEnd_js_sync.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    
</dl>


        
    
    </div>

    

    

    

     

    

    

    

    

    
</article>

</section>







<section>

<header>
    
        <h2>frontEnd/srt/index.js</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description">provides a function to convert srt line object json to srt file content as string
originally from https://github.com/pietrop/srtParserComposer and https://www.npmjs.com/package/srt_parser_composer 
 Expecting srtJsonContent to be like so

```json
[
  {
    "id": "1",
    "startTime": "00:00:00,160",
    "endTime": "00:00:04,890",
    "text": "There’s this door on the 10th floor I just\nhate so much.\n"
  },
  {
    "id": "3",
    "startTime": "00:00:05,799",
    "endTime": "00:00:11,629",
    "text": "Goddammit!\nDo you ever get this door wrong? “pretty\n"
  },
  {
    "text": "regularly.”\nHow often? “like 30% of the time.”\n",
    "id": "4",
    "startTime": "00:00:11,629",
    "endTime": "00:00:12,000"
  },
  {
    "id": "6",
    "startTime": "00:00:14,290",
    "endTime": "00:00:16,869",
    "text": "Have you seen people misuse it?\nAll the time. Every day. Constantly.\n"
  },
```

it returns a string like so
```
1
00:00:00,160 --> 00:00:04,890
There’s this door on the 10th floor I just
hate so much.

3
00:00:05,799 --> 00:00:11,629
Goddammit!
Do you ever get this door wrong? “pretty

4
00:00:11,629 --> 00:00:12,000
regularly.”
How often? “like 30% of the time.”

6
00:00:14,290 --> 00:00:16,869
Have you seen people misuse it?
All the time. Every day. Constantly.
```</div>
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    
    <dt class="tag-author">Author:</dt>
    <dd class="tag-author">
        <ul>
            <li>Pietro Passarelli</li>
        </ul>
    </dd>
    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="frontEnd_srt_index.js.html">frontEnd/srt/index.js</a>, <a href="frontEnd_srt_index.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    
</dl>


        
    
    </div>

    

    

    

     

    

    

    

    

    
</article>

</section>







<section>

<header>
    
        <h2>interactive_transcription_generator/sam_transcriber/convert_to_wav.js</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description">Convers video file into wav (or any ffmpeg supported input)
takes in input file, output destination file, and callback,
callback returns audio file name/path</div>
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="interactive_transcription_generator_sam_transcriber_convert_to_wav.js.html">interactive_transcription_generator/sam_transcriber/convert_to_wav.js</a>, <a href="interactive_transcription_generator_sam_transcriber_convert_to_wav.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    
</dl>


        
    
    </div>

    

    
        <h3 class="subsection-title">Requires</h3>

        <ul>
            <li>module:fluent-ffmpeg</li>
        </ul>
    

    

     

    

    

    

    

    
</article>

</section>







<section>

<header>
    
        <h2>interactive_transcription_generator/sam_transcriber/index.js</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description">Module function that takes in the file path to a media audio or video file and returns a json of transcription.</div>
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    
    <dt class="tag-author">Author:</dt>
    <dd class="tag-author">
        <ul>
            <li>Pietro Passarelli</li>
        </ul>
    </dd>
    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="interactive_transcription_generator_sam_transcriber_index.js.html">interactive_transcription_generator/sam_transcriber/index.js</a>, <a href="interactive_transcription_generator_sam_transcriber_index.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    
</dl>


        
            <h3>Example</h3>
            
    <pre class="prettyprint"><code>var path    = require('path');
  var fs      = require('fs');
  var transcriber = require("./index.js");

  var demoFile = "someFilePath.mov";

  //split audio files are kept in tmp folder and then delted
  var tmpFolder = ".";
  var audioFileName = tmpFolder+"/"+path.parse(demoFile).base+".wav";

  //IBM Keys, json with username password attributes.
  var keys = require("path_to_ibm_watson_keys/wttskeys.json")
  //path to ffmpeg and ffprobe pin
  var ffmpegPath = "/path_to_ffmpeg_bin/ffmpeg";
  var ffprobePath = "/path_to_ffmprobe_bin/ffprobe";

  transcriber({
    videoFile: demoFile,
    keys:keys,
    audioFileOutput: audioFileName,
    ffmpegBin: ffmpegPath,
    tmpPath: tmpFolder,
    ffprobePath: ffprobePath,
    callback: function(respTranscriptJson){

      console.log(JSON.stringify(respTranscriptJson,null,2));

      fs.writeFileSync("./example_tramscription.json",JSON.stringify(respTranscriptJson ))

      //optionally if you don't need to keep the audio file used to send to IBM Watson, here is a good place/time to delete it.
      //eg deleting audio file used for transcription
      // fs.unlinkSync(audioFileName);

      //However if you need, the audio file for instance to do speaker diarization with another system that requries same audio, here's a good place to save the file name/file path for reference.

    }
  })</code></pre>

        
    
    </div>

    

    
        <h3 class="subsection-title">Requires</h3>

        <ul>
            <li>module:fs</li>
        
            <li>module:path</li>
        
            <li>module:parseSamJsonToTranscripJson</li>
        
            <li>module:gentle_transcribe</li>
        
            <li>module:convertToWav</li>
        
            <li>module:split</li>
        
            <li>module:SendToWatson</li>
        
            <li>module:parse</li>
        
            <li>module:writeOut</li>
        </ul>
    

    

     

    

    

    

    

    
</article>

</section>







<section>

<header>
    
        <h2>interactive_transcription_generator/sam_transcriber/split.js</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description">Takes in an audio file, if it exceeds 5 minutes, it splits at 5 minutes intervalls. 
Used by sam_transcriber/index.js module.</div>
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="interactive_transcription_generator_sam_transcriber_split.js.html">interactive_transcription_generator/sam_transcriber/split.js</a>, <a href="interactive_transcription_generator_sam_transcriber_split.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    
    <dt class="tag-todo">To Do:</dt>
    <dd class="tag-todo">
        <ul>
            <li>refactor to use config object instead of 5 param. Would need updating sam_transcriber/index.js.</li>
        </ul>
    </dd>
    
</dl>


        
            <h3>Examples</h3>
            
        <p class="code-caption">Example usage </p>
    
    <pre class="prettyprint"><code> split(newFile, tmpFolder, ffmpegPath, ffprobePath, function(files) {
    //can do something with array of files
 })</code></pre>

        <p class="code-caption">Example output `files`</p>
    
    <pre class="prettyprint"><code>   [
    {
      name: filename,
      offset: 0
     },
     ...
   ]</code></pre>

        
    
    </div>

    

    
        <h3 class="subsection-title">Requires</h3>

        <ul>
            <li>module:fluent-ffmpeg</li>
        
            <li>module:path</li>
        
            <li>module:fs</li>
        
            <li>module:trimmer.js</li>
        </ul>
    

    

     

    

    

    

    

    
</article>

</section>







<section>

<header>
    
        <h2>interactive_transcription_generator/sam_transcriber/trimmer.js</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description">trims a video or audio file 
Used by sam_transcriber/split.js module.</div>
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="interactive_transcription_generator_sam_transcriber_trimmer.js.html">interactive_transcription_generator/sam_transcriber/trimmer.js</a>, <a href="interactive_transcription_generator_sam_transcriber_trimmer.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    
</dl>


        
            <h3>Example</h3>
            
    <pre class="prettyprint"><code>var trimmer = require('./index.js')
 trimmer.trim({
	src:"debate_test.wav", 
	input: 773,
	duration:20,
	outputName:"debate_test_trimmed.wav",
	callback: function(){
		console.log("done")
	}
})</code></pre>

        
    
    </div>

    

    
        <h3 class="subsection-title">Requires</h3>

        <ul>
            <li>module:ffmpeg-fluent</li>
        </ul>
    

    

     

    

    

    

    

    
</article>

</section>







<section>

<header>
    
        <h2>interactive_transcription_generator/video_metadata_reader/index.js</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description">Reads video metadata needed for EDL. reel, timecode, fps. If those fields are not present in the metadata associated with the media file the attributes in the resulting json is replaced with "NA".</div>
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    
    <dt class="tag-author">Author:</dt>
    <dd class="tag-author">
        <ul>
            <li>Pietro Passarelli</li>
        </ul>
    </dd>
    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="interactive_transcription_generator_video_metadata_reader_index.js.html">interactive_transcription_generator/video_metadata_reader/index.js</a>, <a href="interactive_transcription_generator_video_metadata_reader_index.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    
</dl>


        
    
    </div>

    

    
        <h3 class="subsection-title">Requires</h3>

        <ul>
            <li>module:fluent-ffmpeg</li>
        
            <li>module:path</li>
        </ul>
    

    

     

    

    

    

    

    
</article>

</section>







<section>

<header>
    
        <h2>interactive_transcription_generator/video_to_html5_webm/index.js</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description">Converts audio or video file into a HTML5 video webm.
uses code from this issue/question from fluent-ffmepg https://github.com/fluent-ffmpeg/node-fluent-ffmpeg/issues/274
to understand the ffmpeg used to encode webm video see this guide https://trac.ffmpeg.org/wiki/Encode/VP8</div>
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    
    <dt class="tag-author">Author:</dt>
    <dd class="tag-author">
        <ul>
            <li>Pietro Passarelli</li>
        </ul>
    </dd>
    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="interactive_transcription_generator_video_to_html5_webm_index.js.html">interactive_transcription_generator/video_to_html5_webm/index.js</a>, <a href="interactive_transcription_generator_video_to_html5_webm_index.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    
</dl>


        
    
    </div>

    

    
        <h3 class="subsection-title">Requires</h3>

        <ul>
            <li>module:fluent-ffmpeg</li>
        
            <li>module:an</li>
        </ul>
    

    

     

    

    

    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="EDL.html">EDL</a></li></ul><h3>Global</h3><ul><li><a href="global.html#addsinfoontrimmedclipstolistoffiles.">adds info on trimmed clips to list of files.</a></li><li><a href="global.html#autoEdit2API">autoEdit2API</a></li><li><a href="global.html#convertTakesinaconfigobjectwithpropreties:src,outputName,ffmpegBinandoptionalcallback.">convert
Takes in a config object with propreties: src, outputName, ffmpegBin and optional callback.</a></li><li><a href="global.html#convertToWav">convertToWav</a></li><li><a href="global.html#createSrtContent">createSrtContent</a></li><li><a href="global.html#fromSeconds">fromSeconds</a></li><li><a href="global.html#fromSecondsForSrt">fromSecondsForSrt</a></li><li><a href="global.html#fs">fs</a></li><li><a href="global.html#getFileName">getFileName</a></li><li><a href="global.html#makePaperEdit">makePaperEdit</a></li><li><a href="global.html#nw">nw</a></li><li><a href="global.html#padNumber">padNumber</a></li><li><a href="global.html#parse">parse</a></li><li><a href="global.html#send_to_gentle">send_to_gentle</a></li><li><a href="global.html#SendToWatson">SendToWatson</a></li><li><a href="global.html#split">split</a></li><li><a href="global.html#toSeconds">toSeconds</a></li><li><a href="global.html#transcribe">transcribe</a></li><li><a href="global.html#trim">trim</a></li><li><a href="global.html#watson">watson</a></li><li><a href="global.html#%257Bstirng%257DEDL-andEDLstringforanEDLline.">{stirng} EDL - and EDL string  for an EDL line.</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.2</a> on Tue Oct 18 2016 13:13:02 GMT-0400 (EDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>