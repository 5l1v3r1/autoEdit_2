<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: interactive_transcription_generator/transcriber/gentle_stt_node/gentle_stt.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: interactive_transcription_generator/transcriber/gentle_stt_node/gentle_stt.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
* @module send_to_gentle
* @description gentle stt SDK
* @example &lt;caption>Example usage - transcribe audio&lt;/caption>

var send_to_gentle = require("./gentle_stt.js");
var demo_audio  ="demo_audio.wav";
send_to_gentle({audio: demo_audio},function(watsonSttJson){
  console.log(JSON.stringify(watsonSttJson, null, '\t'))
})
* @example &lt;caption>Example usage - aligning text to audio&lt;/caption>

var send_to_gentle = require("./gentle_stt.js");
var demo_audio  ="demo_audio.wav";
var demo_text = "./demo.txt"
send_to_gentle({audio: demo_audio, text: demo_text},function(watsonSttJson){
  console.log(JSON.stringify(watsonSttJson, null, '\t'))
})
*/
var request = require('request');
var fs = require('fs');


/**
* @function send_to_gentle
* Takes in file with absolute path. can use node module path to get absolute path of a file.
*/
function send_to_gentle(config, callback) {
  //TODO: issue is that when gentle app load, the port by default is 8675, but this is not reliable so it could be a different one sometimes making the request void.
  var url = "http://localhost:8765/transcriptions?async=false";
  var file = config.audio;
  var text;
  //text is optional so this could be undefined if not set
  if(typeof config.text !== 'undefined'){
    text  = config.text;
  }
  //Sending request to Gentle STT")
  var options = {
    headers: {
      'Content-Type': 'multipart'
    },
    formData: {
      audio: fs.createReadStream(file)
    }
  };
  //if there is a text attribute adding it to the form data 
  if(typeof text !== 'undefined'){
    options.formData.transcript = fs.createReadStream(text);
  }
  //sends request to gentle stt api service
  request.post(url, options, function(error, response, body) {
    if (error) console.log(error);   
    if (typeof callback !== 'undefined') {
      callback(JSON.parse(body));
    }
  });
}

module.exports = send_to_gentle;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-autoEdit2API.html">autoEdit2API</a></li><li><a href="module-convert_to_wav.html">convert_to_wav</a></li><li><a href="module-edl_composer.html">edl_composer</a></li><li><a href="module-interactive_transcriptionn_generator.html">interactive_transcriptionn_generator</a></li><li><a href="module-parse.html">parse</a></li><li><a href="module-parseSamJsonToTranscripJson.html">parseSamJsonToTranscripJson</a></li><li><a href="module-send_to_gentle.html">send_to_gentle</a></li><li><a href="module-SendToWatson.html">SendToWatson</a></li><li><a href="module-split.html">split</a></li><li><a href="module-srt.html">srt</a></li><li><a href="module-transcriber.html">transcriber</a></li><li><a href="module-trimmer.html">trimmer</a></li><li><a href="module-video_metadata_reader.html">video_metadata_reader</a></li><li><a href="module-video_to_html5_webm.html">video_to_html5_webm</a></li><li><a href="module-writeOut.html">writeOut</a></li></ul><h3>Classes</h3><ul><li><a href="autoEdit2API.html">autoEdit2API</a></li><li><a href="module-edl_composer-EDL.html">EDL</a></li><li><a href="SendToWatson.html">SendToWatson</a></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-EDL_format.html">EDL_format</a></li><li><a href="tutorial-IBM_watson_stt_specs.html">IBM_watson_stt_specs</a></li><li><a href="tutorial-autoEdit2_transcrition_json_spec.html">autoEdit2_transcrition_json_spec</a></li><li><a href="tutorial-components.html">components</a></li><li><a href="tutorial-configuration.html">configuration</a></li><li><a href="tutorial-dependencies.html">dependencies</a></li><li><a href="tutorial-deployment.html">deployment</a></li><li><a href="tutorial-gentle_transcription_json_spec.html">gentle_transcription_json_spec</a></li><li><a href="tutorial-github.html">github</a></li><li><a href="tutorial-intro.html">intro</a></li><li><a href="tutorial-licence.html">licence</a></li><li><a href="tutorial-prerequisites.html">prerequisites</a></li><li><a href="tutorial-tests.html">tests</a></li><li><a href="tutorial-updating_the_documentation.html">updating_the_documentation</a></li></ul><h3>Global</h3><ul><li><a href="global.html#makePaperEdit">makePaperEdit</a></li><li><a href="global.html#nw">nw</a></li><li><a href="global.html#transcribe">transcribe</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.2</a> on Wed Oct 19 2016 00:23:53 GMT-0400 (EDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
